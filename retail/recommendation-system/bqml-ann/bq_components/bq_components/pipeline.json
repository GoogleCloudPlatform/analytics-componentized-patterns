{"displayName": "ann-pipeline-jarekk", "labels": {"tfx_py_version": "3-7", "tfx_runner": "kubeflow_v2", "tfx_version": "0-25-0"}, "pipelineSpec": {"deploymentConfig": {"@type": "type.googleapis.com/ml_pipelines.PipelineDeploymentConfig", "executors": {"compute_pmi_executor": {"container": {"args": ["--executor_class_path", "compute_pmi.compute_pmi_Executor", "--json_serialized_invocation_args", "{{$}}"], "command": ["python", "-m", "tfx.orchestration.kubeflow.v2.container.kubeflow_v2_run_executor"], "image": "gcr.io/jk-mlops-dev/caip-tfx-custom:jarekk"}}, "create_index_executor": {"container": {"args": ["--executor_class_path", "create_index.create_index_Executor", "--json_serialized_invocation_args", "{{$}}"], "command": ["python", "-m", "tfx.orchestration.kubeflow.v2.container.kubeflow_v2_run_executor"], "image": "gcr.io/jk-mlops-dev/caip-tfx-custom:jarekk"}}, "deploy_index_executor": {"container": {"args": ["--executor_class_path", "deploy_index.deploy_index_Executor", "--json_serialized_invocation_args", "{{$}}"], "command": ["python", "-m", "tfx.orchestration.kubeflow.v2.container.kubeflow_v2_run_executor"], "image": "gcr.io/jk-mlops-dev/caip-tfx-custom:jarekk"}}, "export_embeddings_executor": {"container": {"args": ["--executor_class_path", "export_embeddings.export_embeddings_Executor", "--json_serialized_invocation_args", "{{$}}"], "command": ["python", "-m", "tfx.orchestration.kubeflow.v2.container.kubeflow_v2_run_executor"], "image": "gcr.io/jk-mlops-dev/caip-tfx-custom:jarekk"}}, "extract_embeddings_executor": {"container": {"args": ["--executor_class_path", "extract_embeddings.extract_embeddings_Executor", "--json_serialized_invocation_args", "{{$}}"], "command": ["python", "-m", "tfx.orchestration.kubeflow.v2.container.kubeflow_v2_run_executor"], "image": "gcr.io/jk-mlops-dev/caip-tfx-custom:jarekk"}}, "train_item_matching_model_executor": {"container": {"args": ["--executor_class_path", "train_item_matching.train_item_matching_model_Executor", "--json_serialized_invocation_args", "{{$}}"], "command": ["python", "-m", "tfx.orchestration.kubeflow.v2.container.kubeflow_v2_run_executor"], "image": "gcr.io/jk-mlops-dev/caip-tfx-custom:jarekk"}}}}, "pipelineInfo": {"name": "ann-pipeline-jarekk"}, "schemaVersion": "v2alpha1", "sdkVersion": "0.25.0", "tasks": [{"cachingOptions": {}, "executorLabel": "compute_pmi_executor", "inputs": {"parameters": {"bq_dataset": {"runtimeValue": {"constantValue": {"stringValue": "song_embeddings"}}}, "max_group_size": {"runtimeValue": {"constantValue": {"intValue": "100"}}}, "min_item_frequency": {"runtimeValue": {"constantValue": {"intValue": "15"}}}, "project_id": {"runtimeValue": {"constantValue": {"stringValue": "jk-mlops-dev"}}}}}, "outputs": {"artifacts": {"item_cooc": {"artifactType": {"instanceSchema": "title: tfx.Dataset\ntype: object\nproperties:\n"}}}}, "taskInfo": {"name": "compute_pmi"}}, {"cachingOptions": {}, "dependentTasks": ["compute_pmi"], "executorLabel": "train_item_matching_model_executor", "inputs": {"artifacts": {"item_cooc": {"outputArtifactKey": "item_cooc", "producerTask": "compute_pmi"}}, "parameters": {"bq_dataset": {"runtimeValue": {"constantValue": {"stringValue": "song_embeddings"}}}, "dimensions": {"runtimeValue": {"constantValue": {"intValue": "50"}}}, "project_id": {"runtimeValue": {"constantValue": {"stringValue": "jk-mlops-dev"}}}}}, "outputs": {"artifacts": {"bq_model": {"artifactType": {"instanceSchema": "title: tfx.Model\ntype: object\nproperties:\n"}}}}, "taskInfo": {"name": "train_item_matching_model"}}, {"cachingOptions": {}, "dependentTasks": ["train_item_matching_model"], "executorLabel": "extract_embeddings_executor", "inputs": {"artifacts": {"bq_model": {"outputArtifactKey": "bq_model", "producerTask": "train_item_matching_model"}}, "parameters": {"bq_dataset": {"runtimeValue": {"constantValue": {"stringValue": "song_embeddings"}}}, "project_id": {"runtimeValue": {"constantValue": {"stringValue": "jk-mlops-dev"}}}}}, "outputs": {"artifacts": {"item_embeddings": {"artifactType": {"instanceSchema": "title: tfx.Dataset\ntype: object\nproperties:\n"}}}}, "taskInfo": {"name": "extract_embeddings"}}, {"cachingOptions": {}, "dependentTasks": ["extract_embeddings"], "executorLabel": "export_embeddings_executor", "inputs": {"artifacts": {"item_embeddings_bq": {"outputArtifactKey": "item_embeddings", "producerTask": "extract_embeddings"}}, "parameters": {"gcs_location": {"runtimeValue": {"constantValue": {"stringValue": "gs://jk-ann-staging/embeddings"}}}, "project_id": {"runtimeValue": {"constantValue": {"stringValue": "jk-mlops-dev"}}}}}, "outputs": {"artifacts": {"item_embeddings_gcs": {"artifactType": {"instanceSchema": "title: tfx.Dataset\ntype: object\nproperties:\n"}}}}, "taskInfo": {"name": "export_embeddings"}}, {"cachingOptions": {}, "dependentTasks": ["export_embeddings"], "executorLabel": "create_index_executor", "inputs": {"artifacts": {"item_embeddings": {"outputArtifactKey": "item_embeddings_gcs", "producerTask": "export_embeddings"}}, "parameters": {"dimensions": {"runtimeValue": {"constantValue": {"intValue": "50"}}}, "display_name": {"runtimeValue": {"constantValue": {"stringValue": "Song embeddings"}}}, "project_id": {"runtimeValue": {"constantValue": {"stringValue": "jk-mlops-dev"}}}, "project_number": {"runtimeValue": {"constantValue": {"stringValue": "895222332033"}}}, "region": {"runtimeValue": {"constantValue": {"stringValue": "us-central1"}}}}}, "outputs": {"artifacts": {"ann_index": {"artifactType": {"instanceSchema": "title: ann_types.ANNIndex\ntype: object\nproperties: null\n"}}}}, "taskInfo": {"name": "create_index"}}, {"cachingOptions": {}, "dependentTasks": ["create_index"], "executorLabel": "deploy_index_executor", "inputs": {"artifacts": {"ann_index": {"outputArtifactKey": "ann_index", "producerTask": "create_index"}}, "parameters": {"deployed_index_id": {"runtimeValue": {"constantValue": {"stringValue": "deployed_song_embeddings_91"}}}, "project_id": {"runtimeValue": {"constantValue": {"stringValue": "jk-mlops-dev"}}}, "project_number": {"runtimeValue": {"constantValue": {"stringValue": "895222332033"}}}, "region": {"runtimeValue": {"constantValue": {"stringValue": "us-central1"}}}, "vpc_name": {"runtimeValue": {"constantValue": {"stringValue": "default"}}}}}, "outputs": {"artifacts": {"deployed_ann_index": {"artifactType": {"instanceSchema": "title: ann_types.DeployedANNIndex\ntype: object\nproperties: null\n"}}}}, "taskInfo": {"name": "deploy_index"}}]}, "runtimeConfig": {"gcsOutputDirectory": "gs://jk-ann-staging/pipeline_root/ann-pipeline-jarekk"}}